<footer class="spacer" id="contact">
  {% unless page.slug == "contact" or page.slug == "thanks" %}
  <div class="wrap row bottom-text-spacer">
    <div class="col-lg-12 col-xs-12">
      <h5>Wanna chat?</h5>
        <h1 class="bottom-text-spacer">Say <a href="{% link contact.html %}">hello.</a><span class="lottie"><lottie-player src="/img/global/emoji_wave.json" speed="1" loop autoplay></lottie-player></span></h1>
  </div>
  {% endunless %}
</div>
<div class="wrap row top-text-spacer bottom-text-spacer">
  <div class="col-xs-12 copyright">
  {% for category in site.data.nav.social-links limit:1 %}
    <ul class="social-icons bottom-text-spacer">
      {% for item in category.items %}
      <li><a href="{{ item.href }}" class="social-link" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path d="{{ item.path }}"/>
        </svg>
      </a></li>
      {% endfor %}
    </ul>
  {% endfor %}

<div class="copyright">
  <p><small>© {{ 'now' | date: "%Y" }} Erica Leong <!--• <a href="/colophon" class="inline-link beige">Colophon</a>--></small></p> <button class="dark-mode-toggle">Go dark</button>

</div>

  </div>
</div>

</footer>


<script>

  // Toggle dark mode

  let darkModeState = false;

  const button = document.querySelector(".dark-mode-toggle");

  // MediaQueryList object
  const useDark = window.matchMedia("(prefers-color-scheme: dark)");

  // Toggles the "dark-mode" class
  function toggleDarkMode(state) {
    document.documentElement.classList.toggle("dark-mode", state);
    darkModeState = state;
  }

  // Sets localStorage state
  function setDarkModeLocalStorage(state) {
    localStorage.setItem("dark-mode", state);
  }

  // Initial setting
  toggleDarkMode(localStorage.getItem("dark-mode") == "true");

  // Listen for changes in the OS settings.
  // Note: the arrow function shorthand works only in modern browsers,
  // for older browsers define the function using the function keyword.
  useDark.addListener((evt) => toggleDarkMode(evt.matches));

  // Toggles the "dark-mode" class on click and sets localStorage state
  button.addEventListener("click", () => {
    darkModeState = !darkModeState;

    toggleDarkMode(darkModeState);
    setDarkModeLocalStorage(darkModeState);
  });

  window.addEventListener("DOMContentLoaded", load);

</script>

<script>

  // Show mobile drawer navigation

  const menu = document.querySelector(".mobile-menu");
  const menuItems = document.querySelectorAll(".menuItem");
  const hamburger= document.querySelector(".hamburger");
  const closeIcon= document.querySelector(".closeIcon");
  const menuIcon = document.querySelector(".menuIcon");

  function toggleMenu() {
    if (menu.classList.contains("showMenu")) {
      menu.classList.remove("showMenu");
    } else {
      menu.classList.add("showMenu");
      menuItems.classList.add("showMenu");
    }
  }

  hamburger.addEventListener("click", toggleMenu);

  menuItems.forEach( 
    function(menuItem) { 
      menuItem.addEventListener("click", toggleMenu);
    }
  )

</script>

<script>

    // Tuck desktop nav on scroll

    var didScroll;
    var lastScrollTop = 0;
    var delta = 5;
    var navbarHeight = $('nav').outerHeight();

    $(window).scroll(function(event){
        didScroll = true;
    });

    setInterval(function() {
        if (didScroll) {
            hasScrolled();
            didScroll = false;
        }
    }, 200);

    function hasScrolled() {
        var st = $(this).scrollTop();
        
        // Make sure they scroll more than delta
        if(Math.abs(lastScrollTop - st) <= delta)
            return;
        
        // If they scrolled down and are past the navbar, add class .nav-up.
        // This is necessary so you never see what is "behind" the navbar.
        if (st > lastScrollTop && st > navbarHeight){
            // Scroll Down
            $('nav').removeClass('nav-down').addClass('nav-up');
        } else {
            // Scroll Up
            if(st + $(window).height() < $(document).height()) {
                $('nav').removeClass('nav-up').addClass('nav-down');
            }
        }
        
        lastScrollTop = st;
    }
</script>

<script>

  // ChatGPT Testimonial Carousel

    const carousel = document.querySelector(".testimonial-carousel");
    const prevBtn = document.querySelector(".prev-btn");
    const nextBtn = document.querySelector(".next-btn");

    let scrollPos = 0;
    const scrollStep = carousel.offsetWidth;

    prevBtn.addEventListener("click", () => {
      scrollPos = Math.max(scrollPos - scrollStep, 0);
      carousel.scroll({ left: scrollPos, behavior: "smooth" });
    });

    nextBtn.addEventListener("click", () => {
      scrollPos = Math.min(scrollPos + scrollStep, carousel.scrollWidth - carousel.offsetWidth);
      carousel.scroll({ left: scrollPos, behavior: "smooth" });
    });
</script>

<script>
  $(document).ready(function(){
  $('.owl-carousel').owlCarousel();
});
</script>

<!--{% if page.slug == "about" %}
<script>
  $(document).ready(function(){
    $('#about-illo').hover(
        function(){$(this).attr("src","/img/global/about-illo-hover.png")},
        function(){$(this).attr("src","/img/global/about-illo.png")}
    );
});
</script>
{% endif %}-->